paypal.Buttons({
    style: {
        shape: 'rect',
        color: 'gold',
        layout: 'vertical',
        label: 'paypal'

    },

createOrder: (data, actions) => {
    return actions.order.create({
        purchase_units: [{
        amount: {
            value: '{{ order.get_total }}'// Can also reference a variable or function
        }
        }]
    });
    },

   
      onApprove: (data, actions) => {
        return actions.order.capture().then(function(orderData) {
            sendData();
            function sendData() {
                fetch(url, {
                  method: "POST",
                  headers: {
                    "Content-type": "application/json",
                    "X-CSRFToken": csrftoken,
                  },
                  body: JSON.stringify({ 
                    'order_id': orderData.id, 
                    'payment_id': orderData.payer.payer_id, 
                    'status': orderData.status }),
                });
              }
              window.location.href = "";
              alert(
                "Transaction completed your payment ID is: " + orderData.id + "!"
              );
        });
      }

      
     
}).render('#paypal-button-container');